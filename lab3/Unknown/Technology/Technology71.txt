Airbnb has capitulated to the demands of lawmakers over its operations in New York City, the company’s largest market in the United States, agreeing to drop a lawsuit in which it was pushing back against a newly passed state law that it said could have hurt its business.The short-term home rental service on Friday settled the lawsuit that it filed against New York City two months ago. The suit challenged a New York law that Gov. Andrew M. Cuomo signed in October. That law called for fines of as much as $7,500 for illegally listing a property on a rental platform such as Airbnb.The company had said the large fines could have deterred hosts and impaired its revenue in New York City. Hosts in the city generated about $1 billion in revenue last year, and the company took a cut of that in fees.But Airbnb on Friday agreed that it would drop the suit as long as New York City enforces the new law only against hosts and does not fine Airbnb. The settlement takes effect on Monday.The agreement is a victory for opponents of Airbnb. The company and New York authorities have battled for years over the legality of offering short-term lodging through the service, and the relationship has long been inconsistent.Since 2010, it has been illegal in New York to rent out a whole apartment on Airbnb for fewer than 30 days. In October, Airbnb said it was willing to crack down on people in New York City who rent out multiple homes, bowing to pressure from politicians and tenants’ rights groups who said the company had made it harder to find affordable housing in the city.“This is an astounding about-face on the part of Airbnb, which clearly recognized that this was a foolhardy and frivolous lawsuit,” Assemblywoman Linda B. Rosenthal, who wrote the law that Airbnb opposed, said of the settlement on Friday.In a statement, Airbnb said the settlement was “a material step forward for our hosts.”Airbnb has been fighting with local governments around the globe that are displeased with the effects of the online rental service. Cities such as Amsterdam, Miami Beach and New Orleans have been closely watching the New York case.“I expect the city will now get down to the important business of enforcing the law against the serial lawbreakers on the site” who turn affordable housing into illegal hotels, Ms. Rosenthal said in her statement. “This is a win for everyone.”